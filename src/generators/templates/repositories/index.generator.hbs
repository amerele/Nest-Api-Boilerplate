import { Injectable } from '@nestjs/common';
import {Knex} from "knex";
import { {{titleCase name}} } from 'src/entities/{{kebabCase name}}.entity';
import { BaseKnexRepository } from 'src/repositories/base-knex.repository';
import { Create{{titleCase name}}Dto } from '../dto/create-{{kebabCase name}}.dto';

@Injectable()
export class {{titleCase name}}Repository extends BaseKnexRepository {

  public async findAll(knexInstance): Promise<{{titleCase name}}> {
    return await knexInstance('TABELA.{{kebabCase name}}')
      .where('')
      .select('*');
  }
  public async findByPrimary(knexInstance, id: string): Promise<{{titleCase name}}> {
    return await knexInstance('TABELA.{{kebabCase name}}')
      .where({id})
      .select('*');
  }
  public async create{{titleCase name}}(knexInstance, data: Create{{titleCase name}}Dto, id: string): Promise<{{titleCase name}}> {
    return await knexInstance('TABELA.{{kebabCase name}}')
      .insert({data, id})
      .returning('*')
  }
  public async delete{{titleCase name}}(knexInstance, id: string): Promise<{{titleCase name}}> {
    return await knexInstance('TABELA.{{kebabCase name}}')
      .where({id})
      .del()
  }
}
